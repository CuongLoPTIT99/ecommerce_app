<div class="card">
  <p-dataView #dv [value]="products" [paginator]="false">
    <ng-template pTemplate="list" let-products>
      <div class="grid grid-nogutter">
        <div class="col-12" *ngFor="let item of products; let first = first">
          <div class="flex flex-column sm:flex-row sm:align-items-center p-2 gap-3" [ngClass]="{ 'border-top-1 surface-border': !first }">
            <div class="md:w-5rem relative">
              <img class="block xl:block mx-auto border-round w-full" [src]="item.product.imageUrl" [alt]="item.name" />
              <p-tag [value]="item.inventoryStatus" [severity]="'success'" class="absolute" [style.left.px]="4" [style.top.px]="4" />
            </div>
            <div class="flex flex-column md:flex-row justify-content-between md:align-items-center flex-1 gap-2">
              <div class="flex flex-row md:flex-column justify-content-between align-items-start gap-2">
                <div>
                  <p-tag [value]="item.product.brand" [style]="{'margin-bottom': '5px'}"></p-tag>
                  <p-tag [value]="item.product.name" severity="info"></p-tag>
                </div>
              </div>
              <div class="flex flex-column md:align-items-end gap-2 w-12">
                <div class="flex flex-row md:align-items-center justify-content-between gap-1">
                  <div class="flex flex-row md:flex-row md:align-items-center">
                    <label class="mr-1 h-full font-medium text-secondary text-sm" for="quantity">Quantity</label>
                    <p-inputNumber
                      [min]="1"
                      [max]="1000"
                      [size]="3"
                      [showButtons]="true"
                      inputId="horizontal"
                      id="quantity"
                      [(ngModel)]="item.quantity"
                      (ngModelChange)="onChangeQuantity(item.id, item.quantity)"
                    />
                  </div>
                  <div class="flex flex-row w-7rem p-1">
                    <span class="text-lg font-semibold text-900 w-full">{{ '$' + (item.product.price*(item.quantity ?? 0)).toFixed(2) }}</span>
                  </div>
                </div>
                <div class="flex flex-row-reverse md:flex-row gap-2">
                  <p-button icon="pi pi-times-circle"
                            [size]="'small'"
                            severity="danger"
                            class="flex-auto md:flex-initial white-space-nowrap"
                            label="Remove"
                            (click)="removeCart(item.id)"
                  />
                  <p-button icon="pi pi-shopping-cart"
                            [size]="'small'"
                            class="flex-auto md:flex-initial white-space-nowrap"
                            label="Buy Now"
                            (click)="buyNow(item)"
                            [disabled]="item.inventoryStatus === 'OUTOFSTOCK'"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-dataView>
  <p-paginator
    (onPageChange)="onPageChange($event)"
    [first]="0"
    [rows]="pageSize"
    [totalRecords]="totalRecord"/>
</div>
